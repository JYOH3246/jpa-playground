## 8.5 고아객체(Orphan Object)
### 8.5.1 고아객체 개념

> #### 부모 엔티티와 연관관계가 끊어진 자식 엔티티

- **부모 엔티티의 컬렉션에서 자식 엔티티의 참조가 제거되었을 때**, 자식 엔티티를 고아 객체로 판단하고 삭제하는 기능

    - 고아객체: 참조가 제거된 엔티티(=부모 엔티티와 연관관계가 끊어진 자식 엔티티)

### 8.5.2 고아객체를 삭제하는 법

> #### @OneToMany(mappedBy = " ", orphanRemoval = true)

- 고아 객체 제거 기능은 영속성 컨텍스트를 [플러시](https://velog.io/@xlddy02/플러시란)할 때 적용

    - 플러시 시점에서 DELETE SQL이 실행

### 8.5.3 유의할 점

- 고아 객체 제거 기능은 **참조하는 곳이 하나일 때만** 사용 가능

- **삭제한 엔티티를 다른 곳에서도 참조한다면 문제가 발생한다.**

    - @OneToOne 또는 @OneToMany에만 사용 가능

- 영속성 전이와 차이가 있다.

    - 공통점: 부모 엔티티를 삭제하면, 자식 엔티티도 지워진다. (자식 엔티티가 먼저 지워진다)

    - 차이점
        - CascadeType.REMOVE: 부모 엔티티가 삭제되었을 때만, 자식 엔티티를 삭제
        - orphanRemoval: 부모 엔티티가 삭제된 자식 엔티티 또는 부모 엔티티와의 참조가 제거된(연관관계가 끊어진) 자식 엔티티를 삭제